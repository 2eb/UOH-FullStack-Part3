(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,n,t){e.exports=t(41)},41:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(17),c=t(2),l=t(3),u=t.n(l),i="http://localhost:3001/api/persons",m=function(){return u.a.get(i).then(function(e){return e.data})},s=function(e){return u.a.post(i,e).then(function(e){return e.data})},d=function(e,n){return u.a.put("".concat(i,"/").concat(e),n).then(function(e){return e.data})},f=function(e){return u.a.delete("".concat(i,"/").concat(e)).then(function(e){return e.data})},h=function(e){var n=e.props,t=n.message,a=n.color,r={color:"".concat(a),fontSize:16,borderStyle:"solid",borderRadius:5,padding:10,backgroundColor:"lightgray",marginBottom:10};return null===t?null:o.a.createElement("div",{style:r},t)},g=function(e){var n=e.persons,t=e.searchTerm,a=e.handleRemove;return(""!==t?n.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t)}):n).map(function(e){return o.a.createElement("p",{key:e.name},e.name," ",e.number+" ",o.a.createElement("button",{onClick:function(){return a(e.id,e.name)}},"remove"))})},p=function(e){var n=e.onChange,t=e.value;return o.a.createElement("div",null,"filter shown with"," ",o.a.createElement("input",{onChange:n,value:t}))},b=function(e){var n=e.text,t=e.onChange,a=e.value;return o.a.createElement("div",null,n,": ",o.a.createElement("input",{onChange:t,value:a}))},v=function(e){var n=e.props,t=n.handleNewName,a=n.newName,r=n.handlePhoneNumber,c=n.phoneNumber,l=n.handleClick;return o.a.createElement("form",null,o.a.createElement(b,{text:"name",onChange:t,value:a}),o.a.createElement(b,{text:"number",onChange:r,value:c}),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",onClick:l},"add")))},E=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],l=n[1],u=Object(a.useState)(""),i=Object(c.a)(u,2),b=i[0],E=i[1],w=Object(a.useState)(""),C=Object(c.a)(w,2),O=C[0],j=C[1],N=Object(a.useState)(""),y=Object(c.a)(N,2),k=y[0],T=y[1],S=Object(a.useState)({message:null,color:null}),x=Object(c.a)(S,2),L=x[0],R=x[1];Object(a.useEffect)(function(){m().then(function(e){console.log("getAll called"),l(e)})},[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(h,{props:L}),o.a.createElement(p,{onChange:function(e){T(e.target.value.toLowerCase())},value:k}),o.a.createElement("h2",null,"Add a number"),o.a.createElement(v,{props:{handleNewName:function(e){E(e.target.value)},newName:b,handlePhoneNumber:function(e){j(e.target.value)},phoneNumber:O,handleClick:function(e){e.preventDefault();var n=t.filter(function(e){return e.name.toLowerCase()===b.toLowerCase()});if(0!==n.length){var a=Object(r.a)({},n[0],{number:O});window.confirm("".concat(a.name," is already added to phonebook,")+"replace the old number with a new one?")&&d(a.id,a).then(function(e){R({message:'Contact "'.concat(a.name,'" updated succesfully'),color:"green"}),setTimeout(function(){R({message:null,color:null})},5e3),l(t.map(function(e){return e.id===a.id?a:e}))}).catch(function(e){R({message:e.response.data.error,color:"red"}),setTimeout(function(){R({message:null,color:null})},5e3)})}else{var o={name:b,number:O};s(o).then(function(e){R({message:'New contact "'.concat(o.name,'" created succesfully'),color:"green"}),setTimeout(function(){R({message:null,color:null})},5e3),l(t.concat(e))}).catch(function(e){R({message:e.response.data.error,color:"red"}),setTimeout(function(){R({message:null,color:null})},5e3)})}E(""),j("")}}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(g,{persons:t,searchTerm:k,handleRemove:function(e,n){window.confirm("Remove ".concat(n,"?"))&&f(e).then(function(a){R({message:'Contact "'.concat(n,'" removed succesfully'),color:"green"}),setTimeout(function(){R({message:null,color:null})},5e3),l(t.filter(function(n){return n.id!==e}))}).catch(function(a){l(t.filter(function(n){return n.id!==e})),R({message:'Error: "'.concat(n,'" has already been removed from server'),color:"red"}),setTimeout(function(){R({message:null,color:null})},5e3)})}}))},w=t(16);t.n(w).a.render(o.a.createElement(E,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.a91b2b6e.chunk.js.map