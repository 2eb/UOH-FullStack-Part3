(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,n,t){e.exports=t(41)},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(17),c=t(2),u=t(3),l=t.n(u),i="/api/persons",m=function(){return l.a.get(i).then(function(e){return e.data})},s=function(e){return l.a.post(i,e).then(function(e){return e.data})},d=function(e,n){return l.a.put("".concat(i,"/").concat(e),n).then(function(e){return e.data})},f=function(e){return l.a.delete("".concat(i,"/").concat(e)).then(function(e){return e.data})},h=function(e){var n=e.props,t=n.message,a=n.color,o={color:"".concat(a),fontSize:16,borderStyle:"solid",borderRadius:5,padding:10,backgroundColor:"lightgray",marginBottom:10};return null===t?null:r.a.createElement("div",{style:o},t)},b=function(e){var n=e.persons,t=e.searchTerm,a=e.handleRemove;return(""!==t?n.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t)}):n).map(function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number+" ",r.a.createElement("button",{onClick:function(){return a(e.id,e.name)}},"remove"))})},g=function(e){var n=e.onChange,t=e.value;return r.a.createElement("div",null,"filter shown with"," ",r.a.createElement("input",{onChange:n,value:t}))},v=function(e){var n=e.text,t=e.onChange,a=e.value;return r.a.createElement("div",null,n,": ",r.a.createElement("input",{onChange:t,value:a}))},p=function(e){var n=e.props,t=n.handleNewName,a=n.newName,o=n.handlePhoneNumber,c=n.phoneNumber,u=n.handleClick;return r.a.createElement("form",null,r.a.createElement(v,{text:"name",onChange:t,value:a}),r.a.createElement(v,{text:"number",onChange:o,value:c}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:u},"add")))},E=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],l=Object(a.useState)(""),i=Object(c.a)(l,2),v=i[0],E=i[1],w=Object(a.useState)(""),C=Object(c.a)(w,2),O=C[0],j=C[1],y=Object(a.useState)(""),N=Object(c.a)(y,2),k=N[0],S=N[1],T=Object(a.useState)({message:null,color:null}),x=Object(c.a)(T,2),L=x[0],R=x[1];Object(a.useEffect)(function(){m().then(function(e){console.log("getAll called"),u(e)})},[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(h,{props:L}),r.a.createElement(g,{onChange:function(e){S(e.target.value.toLowerCase())},value:k}),r.a.createElement("h2",null,"Add a number"),r.a.createElement(p,{props:{handleNewName:function(e){E(e.target.value)},newName:v,handlePhoneNumber:function(e){j(e.target.value)},phoneNumber:O,handleClick:function(e){e.preventDefault();var n=t.filter(function(e){return e.name.toLowerCase()===v.toLowerCase()});if(0!==n.length){var a=Object(o.a)({},n[0],{number:O});window.confirm("".concat(a.name," is already added to phonebook,")+"replace the old number with a new one?")&&d(a.id,a).then(function(e){R({message:'Contact "'.concat(a.name,'" updated succesfully'),color:"green"}),setTimeout(function(){R({message:null,color:null})},5e3),u(t.map(function(e){return e.id===a.id?a:e}))}).catch(function(e){u(t.filter(function(e){return e.id!==a.id})),R({message:'Error: "'.concat(a.name,'" has already been removed from server'),color:"red"}),setTimeout(function(){R({message:null,color:null})},5e3)})}else{var r={name:v,number:O};s(r).then(function(e){R({message:'New contact "'.concat(r.name,'" created succesfully'),color:"green"}),setTimeout(function(){R({message:null,color:null})},5e3),u(t.concat(e))})}E(""),j("")}}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(b,{persons:t,searchTerm:k,handleRemove:function(e,n){window.confirm("Remove ".concat(n,"?"))&&f(e).then(function(a){R({message:'Contact "'.concat(n,'" removed succesfully'),color:"green"}),setTimeout(function(){R({message:null,color:null})},5e3),u(t.filter(function(n){return n.id!==e}))}).catch(function(a){u(t.filter(function(n){return n.id!==e})),R({message:'Error: "'.concat(n,'" has already been removed from server'),color:"red"}),setTimeout(function(){R({message:null,color:null})},5e3)})}}))},w=t(16);t.n(w).a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.dc7ad359.chunk.js.map